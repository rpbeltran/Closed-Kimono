<!DOCTYPE html>
<html>

<head>

  <meta charset="UTF-8">
  <title>Login Materialize</title>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css'>

  <link rel='stylesheet prefetch' href='https://cdn.materialdesignicons.com/1.1.34/'>

  <link rel="stylesheet" href="style.css">

</head>

<body>

<div id="login-page" class="row">

  <div class="col s12 z-depth-6 card-panel" style = "padding-bottom:20px;">

    <div id = "form" class="login-form">
    </div>

  </div>

</div>


<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js'></script>

<script src="index.js"></script>

<script type="text/javascript">

  function postEmail ( operation ) {
    if (operation == "login" ) {
      return {
        "accepted": true,
        "passwords": 2
      }
    }
  }

  function loadEmailStage( ) {

    $("#form").html ('<div class="row"></div>' +
                     '<div class="row"></div>' +
                     '<div style = "text-align:center" >'+
                     '    <h3 style = >Closed Kimono</h3>' +
                     '    Because aint nobody want to see that' +
                     '</div>' +
                     '<div class="row"></div> ' +
                     '<div class="input-field col s12">' +
                     '    <i class="material-icons prefix">mail_outline</i>' +
                     '    <input class="validate" id="email" type="email">' +
                     '    <label for="email" data-error="invalid email" data-success="valid">Email</label>' +
                     '</div>' +
                     '<div class="row">' +
                     '</div>' +
                     '<div class="row">' +
                     '    <div class="input-field col s4 " style = "font-size:75%;">' +
                     '       <a href="#", id="register" , class="btn waves-effect waves-light col s12">Register</a>' +
                     '    </div>' +
                     '    <div class="input-field col s7">' +
                     '        <a href="#" , id="login" , class="btn waves-effect waves-light col s12">Login</a>' +
                     '     </div>' +
                     '</div>' );

    $("#login").click(loginEmail);

  }


  function loadPasswordStage( passwords ) {

    var content = '<div class="row"></div>' +
                  '<div class="row"></div>' +
                  '<div style = "text-align:center" >'+
                  '    <h3 style = >Closed Kimono</h3>' +
                  '    Because aint nobody want to see that' +
                  '</div>' +
                  '<div class="row"></div> ';

    for ( var i = 0; i < passwords; i++ ) {

      i = (i==0) ? "" : (i+1).toString();

      content += '<div class="row">' +
                 '   <div class="input-field col s12">' +
                 '      <i class="material-icons prefix">lock_outline</i>' +
                 '      <input id="password'+i+'" type="password">' +
                 '      <label for="password'+i+'"> Password '+i+' </label>' +
                 '   </div>' +
                 '</div>'
    }

    content += '<div class="row">' +
               '  <div class="input-field col s12">' +
               '    <a href="#" , id="authenticate" , class="btn waves-effect waves-light col s12">Authenticate</a>' +
               '  </div>'
               '</div>';

    $("#form").html ( content );

    $("#authenticate").on('click', function( ) {
      alert("Authenticated");
    } );

  }



  function loginEmail ( ) {
    var response = postEmail("login");
    if (response.accepted) {
      loadPasswordStage( 2 );
    } else {
      alert("I don't think you have an account with us.");
    }

  }



loadEmailStage();



</script>

</body>

</html>